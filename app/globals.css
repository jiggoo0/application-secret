@import "tailwindcss";

/* 1. Plugins Registration */
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:where(.dark, .dark *));

/* 2. Tailwind v4 Theme Configuration */
@theme {
  --font-heading: var(--font-heading);
  --font-body: var(--font-body);

  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-secondary: var(--secondary);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
}

/* 3. Global CSS Variables (:root) */
:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.129 0.042 264.695);
  --primary: oklch(0.25 0.05 260);
  --secondary: oklch(0.65 0.2 30);
  --border: oklch(0.922 0.011 264.695);
  --input: oklch(0.922 0.011 264.695);
  --ring: oklch(0.707 0.022 264.695);

  /* นิยามค่าสำหรับภาษาไทยไว้ที่นี่เพื่อให้เรียกใช้ซ้ำได้ */
  --thai-line-height: 1.7;
}

/* 4. Utilities (ประกาศไว้ก่อนการใช้ @apply ใน layer อื่นๆ) */
@utility thai-snug {
  line-height: var(--thai-line-height);
  letter-spacing: 0.01em;
  text-underline-offset: 4px;
}

@utility no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
  }
}

/* 5. Base Layers */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    /* แทนที่จะ @apply thai-snug เราใช้ค่า variable โดยตรงหรือปล่อยให้ utility ทำงานแยกไป */
    @apply bg-background text-foreground font-body antialiased;
    line-height: var(
      --thai-line-height
    ); /* ใช้ค่าโดยตรงเพื่อเลี่ยง Error @apply */
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
    text-rendering: optimizeLegibility;
  }
}

/* 6. Advanced Animations */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@utility animate-entry {
  animation: fade-in-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}
